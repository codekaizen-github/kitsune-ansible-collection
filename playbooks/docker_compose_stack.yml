---
- name: Test
  hosts: '{{target|default("all")}}'
  vars_files:
    - vars/docker_compose_stack.yml
  tasks:
    - name: Deploy Docker Compose stack
      community.docker.docker_compose_v2:
        definition:
          "{{ lookup('ansible.builtin.template', docker_compose_stack_docker_compose_file_src_template_file) |
          from_yaml }}"
        project_name: "{{ docker_compose_stack_docker_compose_project_name }}"
        state: present
      tags:
        - docker_compose_stack
